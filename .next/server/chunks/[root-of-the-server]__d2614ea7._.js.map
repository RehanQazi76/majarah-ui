{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/rehanuddinqazi/Developer/projects/majarah/majarah-ui/app/api/send-email/route.ts"],"sourcesContent":["import { headers } from \"next/headers\";\nimport { NextResponse } from \"next/server\";\n\nconst nodemailer = require('nodemailer')\n\nexport async function POST(request: Request) {\n    const body = await request.json()\n    \n    // Format the form data for email\n    const formatFormData = (data: any) => {\n        let html = '<div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">';\n        html += '<h2 style=\"color: #4899E3; border-bottom: 2px solid #4899E3; padding-bottom: 10px;\">New Contact Form Submission</h2>';\n        \n        // Add contact type\n        html += `<p><strong>Contact Type:</strong> ${data.contactType || 'Not specified'}</p>`;\n        \n        // Add all form fields\n        Object.entries(data).forEach(([key, value]) => {\n            if (key !== 'contactType' && key !== 'submittedAt' && value) {\n                const label = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());\n                let displayValue = value;\n                \n                // Handle arrays (like primaryInterest)\n                if (Array.isArray(value)) {\n                    displayValue = value.join(', ');\n                }\n                \n                // Handle dates\n                if (key === 'selectedDate' && value && typeof value === 'string') {\n                    displayValue = new Date(value).toLocaleDateString();\n                }\n                \n                html += `<p><strong>${label}:</strong> ${displayValue}</p>`;\n            }\n        });\n        \n        html += '<hr style=\"margin: 20px 0; border: none; border-top: 1px solid #eee;\">';\n        html += `<p style=\"color: #666; font-size: 12px;\">Submitted at: ${new Date().toLocaleString()}</p>`;\n        html += '</div>';\n        \n        return html;\n    };\n\n    const message = {\n        from: process.env.EMAIL_FROM,\n        to: process.env.EMAIL_TO,\n        subject: `New ${body.contactType || 'Contact'} Form Submission - Majarah`,\n        html: formatFormData(body),\n        headers: {\n            'X-Entity-Ref-ID': \"newmail\",\n        },\n    };\n\n    var transporter = nodemailer.createTransport({\n        host: 'smtp.gmail.com',\n        port: 465,\n        secure: true,\n        auth: {\n            user: process.env.EMAIL_FROM,\n            pass: process.env.EMAIL_APP_PASSWORD || process.env.PASS,\n        },\n        tls: {\n            // do not fail on invalid certs\n            rejectUnauthorized: false,\n        }\n    });\n    \n    try {\n        await transporter.sendMail(message);\n        return NextResponse.json({ message: \"Email sent successfully\" }, { status: 200 })\n    } catch (e: any) {\n        console.error('Email sending error:', e);\n        return NextResponse.json({ message: `Email sending failed: ${e.message}` }, { status: 500 })\n    }\n}"],"names":[],"mappings":";;;AACA;;AAEA,MAAM;AAEC,eAAe,KAAK,OAAgB;IACvC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAE/B,iCAAiC;IACjC,MAAM,iBAAiB,CAAC;QACpB,IAAI,OAAO;QACX,QAAQ;QAER,mBAAmB;QACnB,QAAQ,CAAC,kCAAkC,EAAE,KAAK,WAAW,IAAI,gBAAgB,IAAI,CAAC;QAEtF,sBAAsB;QACtB,OAAO,OAAO,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;YACtC,IAAI,QAAQ,iBAAiB,QAAQ,iBAAiB,OAAO;gBACzD,MAAM,QAAQ,IAAI,OAAO,CAAC,YAAY,OAAO,OAAO,CAAC,MAAM,CAAA,MAAO,IAAI,WAAW;gBACjF,IAAI,eAAe;gBAEnB,uCAAuC;gBACvC,IAAI,MAAM,OAAO,CAAC,QAAQ;oBACtB,eAAe,MAAM,IAAI,CAAC;gBAC9B;gBAEA,eAAe;gBACf,IAAI,QAAQ,kBAAkB,SAAS,OAAO,UAAU,UAAU;oBAC9D,eAAe,IAAI,KAAK,OAAO,kBAAkB;gBACrD;gBAEA,QAAQ,CAAC,WAAW,EAAE,MAAM,WAAW,EAAE,aAAa,IAAI,CAAC;YAC/D;QACJ;QAEA,QAAQ;QACR,QAAQ,CAAC,uDAAuD,EAAE,IAAI,OAAO,cAAc,GAAG,IAAI,CAAC;QACnG,QAAQ;QAER,OAAO;IACX;IAEA,MAAM,UAAU;QACZ,MAAM,QAAQ,GAAG,CAAC,UAAU;QAC5B,IAAI,QAAQ,GAAG,CAAC,QAAQ;QACxB,SAAS,CAAC,IAAI,EAAE,KAAK,WAAW,IAAI,UAAU,0BAA0B,CAAC;QACzE,MAAM,eAAe;QACrB,SAAS;YACL,mBAAmB;QACvB;IACJ;IAEA,IAAI,cAAc,WAAW,eAAe,CAAC;QACzC,MAAM;QACN,MAAM;QACN,QAAQ;QACR,MAAM;YACF,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,MAAM,QAAQ,GAAG,CAAC,kBAAkB,IAAI,QAAQ,GAAG,CAAC,IAAI;QAC5D;QACA,KAAK;YACD,+BAA+B;YAC/B,oBAAoB;QACxB;IACJ;IAEA,IAAI;QACA,MAAM,YAAY,QAAQ,CAAC;QAC3B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACnF,EAAE,OAAO,GAAQ;QACb,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS,CAAC,sBAAsB,EAAE,EAAE,OAAO,EAAE;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC9F;AACJ","debugId":null}}]
}